var Carousel=function(){var e,t,r,a,s=document.querySelector(".carousel"),l=document.querySelector(".carousel__outer"),o=document.querySelector(".carousel__inner"),n=document.querySelectorAll(".carousel__item"),i=(document.querySelectorAll(".carousel__item--hero"),document.querySelector(".carousel__controls")),u=document.querySelector(".carousel__control--left"),c=document.querySelector(".carousel__control--right"),d=400,m=2,_=500,v=4/3,g=d*v,y=g/m,C=!1,p=0,f=0,L=0|o.getAttribute("data-translated"),h=!1,S=!1,x=!0,b=!1,E=0,A=0|l.getAttribute("data-translated"),X=0;return Init=function(e){console.log("%cInitializing Carousel","color: green;"),AddEventListeners(),CarouselImageInit(),CarouselControlsInit()},AddEventListeners=function(){s.addEventListener("mousedown",MouseDown),s.addEventListener("mousemove",MouseMove),s.addEventListener("mouseup",MouseUp),s.addEventListener("mouseleave",MouseLeave),l.addEventListener("transitionend",TransitionEnd),u.addEventListener("click",CarouselPrev),c.addEventListener("click",CarouselNext)},MouseDown=function(e){e.preventDefault(),x=!0,b=!0,E=e.pageX,A=0|l.getAttribute("data-translated")},MouseMove=function(e){C||b!==!0||(e.pageX-E!==0?(CarouselDragging(!0),CarouselSlideX(e.pageX-E+A),x=!1):x=!0)},MouseUp=function(e){if(x)if(C){if(e.target.classList.contains("carousel__control--target"))return;e.target.classList.contains("carousel__image")?console.log("go to image"):GalleryClose()}else e.target.classList.contains("carousel__image")&&GalleryStart(e.target);CarouselDragging(!1),b=!1},MouseLeave=function(e){CarouselDragging(!1),b=!1},CarouselControlsHide=function(){i.classList.add("carousel__controls--hidden")},CarouselControlsShow=function(){i.classList.remove("carousel__controls--hidden")},CarouselControlsInit=function(){i.style.top=d/2+"px"},TransitionEnd=function(){CarouselControlsShow()},CarouselDragging=function(e){e?(CarouselControlsHide(),l.classList.add("dragging")):(CarouselControlsShow(),l.classList.remove("dragging"))},CarouselImageInit=function(){var e,t=0,r=n.length,a=0;for(t;t<r;t++)e=t%m,0===t?a+=g:(t-1)%m===0&&(a+=y),0===t?(n[t].style.transform="translateX("+(a-g)+"px)",n[t].style.width=g+"px"):(n[t].style.transform="translateX("+(a-y)+"px) translateY("+e*d/m+"px)",n[t].style.width=y+"px");s.style.height=d+"px"},CarouselNext=function(e){e.preventDefault(),C?GalleryNext():(CarouselControlsHide(),CarouselSlideX(A-_))},CarouselPrev=function(e){e.preventDefault(),C?GalleryPrev():(CarouselControlsHide(),CarouselSlideX(A+_))},CarouselSlideTo=function(e){CarouselControlsHide(),CarouselSlideX(A+(parseInt(e.target.getBoundingClientRect().left)-(window.innerWidth/2-e.target.offsetWidth/2))*-1)},CarouselSlideX=function(e){return new Promise(function(t,r){var a=(l.scrollWidth-document.body.scrollWidth)*-1+X;e>0?(CarouselControlsShow(),CarouselTranslateX(0)):e<=a?(CarouselControlsShow(),CarouselTranslateX(a)):CarouselTranslateX(e),t()})},CarouselTranslateX=function(e){l.style.transform="translate3d("+Math.round(e)+"px,0,0)",l.setAttribute("data-translated",Math.round(e))},GalleryStart=function(t){C=!0,e=t.parentElement.getBoundingClientRect(),p=document.body.scrollWidth/2-e.width/2,f=d/2-e.height/2,s.classList.add("carousel--active"),t.parentElement.setAttribute("data-style",t.parentElement.getAttribute("style")),t.parentElement.style.transform="translateX("+p+"px) translateY("+f+"px)",t.parentElement.classList.add("carousel__item--active"),t.parentElement.nextElementSibling.classList.add("carousel__item--next"),t.parentElement.previousElementSibling.classList.add("carousel__item--prev");for(var r=PrevAll(t.parentElement),a=p,l=0;l<r.length;l++)a-=y,r[l].setAttribute("data-style",r[l].getAttribute("style")),r[l].style.transform="translateX("+a+"px) translateY("+f+"px)",r[l].style.width=y+"px";for(var o=NextAll(t.parentElement),n=p,l=0;l<o.length;l++)n+=y,o[l].setAttribute("data-style",o[l].getAttribute("style")),o[l].style.transform="translateX("+n+"px) translateY("+f+"px)",o[l].style.width=y+"px";GalleryTranslateX(Math.abs(A))},GalleryClose=function(){C=!1,s.classList.remove("carousel--active"),document.querySelector(".carousel__item--active").classList.remove("carousel__item--active"),o.removeAttribute("style"),o.removeAttribute("data-translated");for(var e=0;e<n.length;e++)n[e].setAttribute("style",n[e].getAttribute("data-style")),n[e].removeAttribute("data-style");u.classList.contains("carousel__control--hidden")&&u.classList.remove("carousel__control--hidden"),c.classList.contains("carousel__control--hidden")&&c.classList.remove("carousel__control--hidden")},GalleryNext=function(){h&&u.classList.remove("carousel__control--hidden"),t=document.querySelector(".carousel__item--active"),a=document.querySelector(".carousel__item--next"),r=document.querySelector(".carousel__item--prev"),t.classList.add("carousel__item--prev"),t.classList.remove("carousel__item--active"),a.classList.add("carousel__item--active"),a.classList.remove("carousel__item--next"),a.nextElementSibling?a.nextElementSibling.classList.add("carousel__item--next"):(S=!0,c.classList.add("carousel__control--hidden")),r&&r.classList.remove("carousel__item--prev"),L=0|o.getAttribute("data-translated"),GalleryTranslateX(L-y)},GalleryPrev=function(){S&&c.classList.remove("carousel__control--hidden"),t=document.querySelector(".carousel__item--active"),a=document.querySelector(".carousel__item--next"),r=document.querySelector(".carousel__item--prev"),t.classList.add("carousel__item--next"),t.classList.remove("carousel__item--active"),r.classList.add("carousel__item--active"),r.classList.remove("carousel__item--prev"),r.previousElementSibling?r.previousElementSibling.classList.add("carousel__item--prev"):(h=!0,u.classList.add("carousel__control--hidden")),a&&a.classList.remove("carousel__item--next"),L=0|o.getAttribute("data-translated"),GalleryTranslateX(L+y)},GalleryTranslateX=function(e){o.style.transform="translate3d("+Math.round(e)+"px,0,0)",o.setAttribute("data-translated",Math.round(e))},PrevAll=function(e){for(var t=[];e=e.previousElementSibling;)t.push(e);return t},NextAll=function(e){for(var t=[];e=e.nextElementSibling;)t.push(e);return t},{init:Init}}();Carousel.init();