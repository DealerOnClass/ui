"use strict";var Carousel=function(){function t(t){e(),v(!1),n(t),a(),c(t)}function e(){R.addEventListener("keydown",x),k.addEventListener("mousedown",p),k.addEventListener("mousemove",h),k.addEventListener("mouseup",y),k.addEventListener("mouseleave",L),I.addEventListener("click",i),M.addEventListener("click",l)}function n(t){E=t.carouselHeight||400,b=t.carouselRows||2,q=t.aspectRatio||4/3,X=t.carouselIncrement||500,w=t.gutter||30,j=E*q,A=j/b,k.style.height=E+"px",Y.style.transform="translateX(0)",Y.setAttribute("data-translated",0),D.setAttribute("data-translated",0)}function a(){N=0;for(var t=0;t<H.length;t++)H[t].setAttribute("data-index",t),0===t?N+=j:(t-1)%b===0&&(N+=A),0===t?(H[t].style.transform="translateX("+(N-j)+"px)",H[t].style.width=j+"px"):(H[t].style.transform="translateX("+(N-A)+"px)translateY("+t%b*E/b+"px)",H[t].style.width=A+"px")}function r(t){t?Y.classList.add("dragging"):Y.classList.remove("dragging")}function s(t){C=(Y.scrollWidth-R.scrollWidth)*-1,o(t>0?0:t<=C?C:t)}function o(t){G=t,Y.style.transform="translateX("+Math.round(t)+"px)",Y.setAttribute("data-translated",Math.round(t))}function i(t){t.preventDefault(),J?g():s(G-=X)}function l(t){t.preventDefault(),J?m():s(G+=X)}function c(){W.style.transform="translateY("+E/2+"px)"}function u(t){v(!0,t),d(t)}function d(t){for(var e=t.parentElement,n=e.getBoundingClientRect(),a=R.scrollWidth/2-n.width/2-F,r=E/2-n.height/2,s=A+w,o=0;o<H.length;o++)H[o].setAttribute("data-init-position",H[o].style.transform),H[o].style.width=A+"px";e.style.transform="translateX("+a+"px)translateY("+r+"px)scale("+b+","+b+")";for(var i=S(e),l=a,o=0;o<i.length;o++)l-=s,i[o].style.transform="translateX("+l+"px) translateY("+r+"px)";for(var c=_(e),u=a,o=0;o<c.length;o++)u+=s,c[o].style.transform="translateX("+u+"px) translateY("+r+"px)"}function f(){v(!1);for(var t=0;t<H.length;t++)0===t?H[t].style.width=j+"px":H[t].style.width=A+"px",H[t].style.transform=H[t].getAttribute("data-init-position")}function v(t,e){t?(J=!0,k.classList.add("active"),e&&e.parentElement.classList.add("active")):(J=!1,k.classList.remove("active"),k.querySelector(".active")&&k.querySelector(".active").classList.remove("active"))}function g(){var t=k.querySelector(".active"),e=t.nextElementSibling.childNodes[0];d(e),e.parentElement.classList.add("active"),t.classList.remove("active")}function m(){var t=k.querySelector(".active"),e=t.previousElementSibling.childNodes[0];d(e),e.parentElement.classList.add("active"),t.classList.remove("active")}function p(t){t.preventDefault(),O=!0,B=!0,z=t.pageX,F=0|Y.getAttribute("data-translated")}function h(t){J||B!==!0||(t.pageX-z!==0?(r(!0),s(t.pageX-z+F),O=!1):O=!0)}function y(t){if(O)if(J){if(t.target.classList.contains("js-carousel__control"))return;t.target.classList.contains("carousel__image")?console.log("go to image"):f()}else t.target.classList.contains("carousel__image")&&u(t.target);r(!1),B=!1}function L(t){r(!1),B=!1}function x(t){switch(t.keyCode){case 37:l(t);break;case 39:i(t)}}function S(t){for(var e=[];t=t.previousElementSibling;)e.push(t);return e}function _(t){for(var e=[];t=t.nextElementSibling;)e.push(t);return e}var E,b,q,w,j,A,X,C,R=document.body,k=document.querySelector(".js-carousel"),Y=document.querySelector(".js-carousel__outer"),D=document.querySelector(".js-carousel__inner"),H=document.querySelectorAll(".js-carousel__item"),W=document.querySelector(".js-carousel__controls"),I=document.querySelector(".js-carousel__control--next"),M=document.querySelector(".js-carousel__control--prev"),N=0,O=!0,B=!1,z=0,F=0|Y.getAttribute("data-translated"),G=0,J=!1;0|D.getAttribute("data-translated");return{init:t,gstart:u,gclose:f}}();Carousel.init({carouselHeight:400,carouselIncrement:500,carouselRows:2,aspectRatio:4/3});var SetCarouselOptions=function(){function t(){o.addEventListener("change",e),i.addEventListener("change",n)}function e(t){r=t.target.value,a()}function n(t){s=t.target.value,a()}function a(){Carousel.init({carouselHeight:s,carouselRows:r})}var r,s,o=document.querySelector(".js-options-rows"),i=document.querySelector(".js-options-height");return{init:t}}();SetCarouselOptions.init();